{% extends 'layout.html' %}

{% block title %}
  {{title}}
{% endblock %}

{% block content %}
  <div class="container mt-3">
    <h2>{{title}}</h2>
    <hr>
    <div class="row">
      <div class="col">
        <a href="{{url_for('players.new_player')}}" class="btn btn-outline-success">
          <i class="bi bi-folder-plus"></i>
          Add New Player
        </a>
      </div>
      <div class="col">
        <form method="post"
        hx-target="#result"
        hx-trigger="submit"
        hx-post="{{url_for('players.search_player')}}"
        hx-on::after-request="if(event.detail.successful) this.reset()">
          <div class="input-group mb-3">
            <input name="player_name" type="text" class="form-control" placeholder="Search by Player's name">
            <button class="btn btn-outline-secondary" type="submit">
              <i class="bi bi-search"></i>
            </button>
          </div>
        </form>
      </div>
    </div>
<table class="table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Position</th>
      <th>Goals</th>
      <th>Clean Sheets</th>
      <th>Club</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    {% for player in players %}
    <tr>
      <td>{{ player.name }}</td>
      <td>{{ player.position }}</td>
      <td>{{ player.goal }}</td>
      <td>
        {% if player.clean_sheets %}
          {{ player.clean_sheets }}
        {% else %}
          -
        {% endif %}
      </td>
      <td>{{ player.club.name }}</td>
      <td>
        <a href="{{ url_for('players.info_player', id=player.id) }}">Info</a>
        <a href="{{ url_for('players.update_player', id=player.id) }}">Edit</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
  </div>
{% endblock %}
